
### 配置文件
* 与之前的相同，通过 persistence.xml 来取代 hibernate.cfg.xml 文件，实现对 hibernate 的配置

### Java实体类、映射文件
* 与之前的相同，仍然使用注解+实体类的方式提供 映射信息
* 但不同的是，需要多添加一个注解 org.hibernate.envers.Audited
```
import org.hibernate.envers.Audited
@Entity
@Table( name = "EVENTS" )
@Audited  // 它告诉了 Envers 审计该实体的变更记录
public class Event {}
```

### 实例代码
```
public void testBasicUsage() {
    // Envers 是基于 JPA 的，即它的数据操作是通过 JPA 实现的（它会依赖 JPA 的 jar 包）
    entityManagerFactory = Persistence.createEntityManagerFactory( "org.hibernate.tutorial.jpa" );
    EntityManager entityManager = entityManagerFactory.createEntityManager();
    entityManager.getTransaction().begin();
    entityManager.persist( new Event( "Our very first event!", new Date() ) );
    entityManager.persist( new Event( "A follow up event", new Date() ) );
    entityManager.getTransaction().commit();
    entityManager.close();

    AuditReader reader = AuditReaderFactory.get( entityManager );

    // 获取 id 为 2 的 Event 对象的第一个版本
    Event firstRevision = reader.find( Event.class, 2L, 1 );
    // 获取 id 为 2 的 Event 对象的第一个版本
    Event secondRevision = reader.find( Event.class, 2L, 2 );
}
```


