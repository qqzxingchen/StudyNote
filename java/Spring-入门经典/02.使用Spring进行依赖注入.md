
### Spring IoC 容器
* Spring Application Framework的核心是IoC容器。该容器的工作职责包括对应用程序的对象进行
    实例化、初始化、装配以及在对象的整个生命周期中提供其他Spring功能

* 配置元数据
    * 可以通过 XML 的方式来配置元数据
    * 所有的Bean都被定义在 beans 元素节点中，而每一个 Bean 则使用 bean 元素节点进行定义。
    * Bean 的名称由 id 来定义。应用程序或则配置元数据中的其他 Bean 可以通过名称来访问相关的 Bean
    * 配置元数据的实例代码
        * 基于 xml
        ```xml
        <?xml version="1.0" encoding="UTF-8"?>
        <beans xmlns="http://www.springframework.org/schema/beans"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
            <!--
                accountService Bean 
                有一个 accountDao 的属性（property），该属性是下面定义的 accountDao Bean 的一个实例
            -->
            <bean id="accountService" class="com.wiley.beginningspring.ch2.AccountServiceImpl">
                <property name="accountDao" ref="accountDao"/>
            </bean>
            <!-- accountDao Bean -->
            <bean id="accountDao" class="com.wiley.beginningspring.ch2.AccountDaoInMemoryImpl"></bean>
        <beans>
        ```
        * 基于注解
        ```java
        // 下面的代码使用Java注解定义Bean
        // 注解 @Service 、 @Repository 被用来定义两个Bean。实际上，它们又是注解 @Component 的具体形式。
        // 注解 @AutoWired 通常用来指定在运行时被 Spring 容器所注入的Bean依赖。
        @Service("accountService")
        public class AccountServiceImpl implements AccountService{
            private AccountDao accountDao;
            @AutoWired
            public void setAccountDao(AccountDao accountDao){
                this.accountDao = accountDao;
            }
        }
        @Repository("accountDao")
        public class AccountDaoInMemoryImpl implements AccountDao{
        }
        ```
        * 基于 Java
        ```java
        @Configuration
        public class Ch2BeanConfiguration{
            @Bean
            public AccountService accountService(){
                AccountServiceImpl bean = new AccountServiceImpl();
                bean.setAccountDao( accountDao() );
                return bean;
            }
            @Bean
            public AccountDao accountDao(){
                AccountDaoInMemoryImpl bean = new AccountDaoInMemoryImpl();
                return bean;
            }
        }
        ```

* 在一个庞大的项目中，将配置元数据划分到多个不同的文件中是比较好的
    * 这种划分通常反映了应用程序的层，既可以为应用程序的每一层创建一个单独的Bean定义文件或类，也可以为其他特定容器的配置任务创建一些额外的Bean定义文件或类
    * 因此用Spring开发典型的Web应用程序而言，通常会看到下面的文件：
        * beans-web.xml 文件或 ConfigurationForWeb 类中定义了应用程序的Web层/表现层中所操作的 Bean
        * beans-service.xml 文件或 ConfigurationForService 类中定义了应用程序的服务层/业务层所操作的 Bean
        * beans-dao.xml 文件或 ConfigurationForDao 类中定义了应用程序的数据访问层中所操作的 Bean
        * beans-config.xml 文件或 ConfigurationForConfig 类中定义了激活几个容器特定功能所需要的 Bean
        * beans-security.xml 文件或 ConfigurationForSecurity 类中定义了用于应用程序安全性需求的 Bean

* 配置和使用容器
    * Spring容器也是一个Java对象，在某些特定的时间点被创建，并允许管理应用程序的其他部分。
    * 可以使用两种不同的方法来实例化Spring容器
        * 在独立程序中，可以使用编程方法
        * 在Web应用程序中，声明方法会更好(需要借助于web.xml文件中的一些配置来完成)

* 关于实际的例子，可以看文件: 实例-02.md

